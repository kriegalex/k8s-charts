# -- Default values for bentopdf
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# -- Number of pod replicas
replicaCount: 1

image:
  # -- Docker image repository for BentoPDF (uses nginx-unprivileged for enhanced security)
  repository: bentopdf/bentopdf-simple
  # -- Image pull policy
  pullPolicy: IfNotPresent
  # -- Overrides the image tag whose default is the chart appVersion
  # @default -- ""
  tag: ""

# -- Image pull secrets for private Docker registry
imagePullSecrets: []
# -- String to partially override bentopdf.fullname template
nameOverride: ""
# -- String to fully override bentopdf.fullname template
fullnameOverride: ""

serviceAccount:
  # -- Specifies whether a service account should be created
  create: true
  # -- If the service account token should be auto mounted
  automountServiceAccountToken: false
  # -- Annotations to add to the service account
  annotations: {}
  # -- The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  # @default -- ""
  name: ""

# -- Annotations to add to pods
podAnnotations: {}

# Security context for the pod
# Follows BentoPDF security best practices using nginx-unprivileged
podSecurityContext:
  # -- Run container as non-root user
  runAsNonRoot: true
  # -- User ID to run the pod
  runAsUser: 101
  # -- Group ID to run the pod
  runAsGroup: 101
  # -- Group ID for filesystem access
  fsGroup: 101

# Security context for the container
securityContext:
  capabilities:
    drop:
    - ALL
  # -- Allow write access to root filesystem
  readOnlyRootFilesystem: false
  # -- Prevent privilege escalation
  allowPrivilegeEscalation: false

service:
  # -- Kubernetes Service type
  type: ClusterIP
  # -- Kubernetes Service port
  port: 8080
  # -- Container target port
  targetPort: 8080
  # -- Additional annotations for the service
  annotations: {}

ingress:
  # -- Enable ingress resource
  enabled: false
  # -- Ingress class name
  className: ""
  # -- The URL for the ingress endpoint to point to the BentoPDF instance
  url: ""
  # -- Additional ingress annotations
  # @example
  # annotations:
  #   cert-manager.io/cluster-issuer: letsencrypt-prod
  annotations: {}
  # TLS configuration
  tls:
    # -- Enable TLS for ingress
    enabled: false
    # -- Secret name for TLS certificate
    # @default -- "<release-name>-bentopdf-ingress-lets-encrypt"
    secretName: ""

# BentoPDF application configuration
config:
  # -- Log level: DEBUG, INFO, WARNING, ERROR
  logLevel: INFO
  # -- Number of workers
  workers: 1

# -- Resource limits and requests for BentoPDF
resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

# Probes configuration
livenessProbe:
  # -- Enable liveness probe
  enabled: true
  httpGet:
    path: /healthz
    port: http
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

readinessProbe:
  # -- Enable readiness probe
  enabled: true
  httpGet:
    path: /readyz
    port: http
  initialDelaySeconds: 10
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3

# Persistent storage configuration for temporary files
persistence:
  # -- Enable persistent storage
  enabled: false
  # -- Storage class for the PVC
  # @default -- ""
  storageClass: ""
  # -- Access mode for the persistent volume
  accessMode: ReadWriteOnce
  # -- Size of the persistent volume
  size: 10Gi
  # -- Mount path for persistent storage
  mountPath: /tmp/bentopdf
  # -- Use an existing PVC
  # @default -- ""
  existingClaim: ""
